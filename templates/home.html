<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HOME</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
    <!--link rel="stylesheet" href="{{ url_for('static', filename='cwasa.css') }}">
    <script type="text/javascript" src="{{ url_for('static', filename='allcsa.js') }}"></script-->
    <link rel="stylesheet" href="http://vhg.cmp.uea.ac.uk/tech/jas/vhg2021/cwa/cwasa.css" />
    <!--script type="text/javascript" src="http://vhg.cmp.uea.ac.uk/tech/jas/vhg2021/cwa/allcsa.js"></script-->
</head>
<body>
    <div class="header">
        <div class="logo">SIGN LANGUAGE CONVERTER</div>
        <div class="menu-container">
            {% if 'user_id' in session %}
                <button class="signup-button" onclick="window.location.href='/logout'">Log Out</button>
            {% else %}
                <button class="signup-button" onclick="window.location.href='/signup'">Sign Up</button>
            {% endif %}
            <nav class="navbar">
                <a href="/">Home</a>
                <a href="/feedback">Feedback</a>
                <a href="/">Contact</a>
                {% if 'user_id' in session %}
                    <a href="/history">History</a>
                {% endif %}
                <a href="https://www.dictionary.com">Dictionary</a>
            </nav>
            <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
        </div>
    </div>

    <div class="hero">
        <h1>Welcome to Sign Language Converter</h1>
        <p>Convert text to sign language effortlessly.</p>
    </div>
    
    <div class="container">
        <h2>Enter Text</h2>
        <textarea class="text-box" placeholder="Type your text here..."></textarea>
        <div class="buttons">
            <button class="play-button" onclick="playText()">â–¶ Play</button>
            <button class="clear-button" onclick="clearText()">ðŸ—‘ Clear</button>
            <button class="speech-button" onclick="startSpeechRecognition()">ðŸŽ¤ Speak</button>
        </div>
        <div id="avatar_wrapper" class="container" style="">
            <div class="col-md-6">
                <div class="CWASAPanel av0" align="center">
                    <table class="avTable av0">
                        <tbody>
                            <tr>
                                <td align="center">
                                    <div class="divCtrlPanel" style="display: none;">
                                        <!--========================================================-->
                                      <span class="spanPlayA av0">
                                      Avatar:
                                      <select class="menuAv av0">
                                      <option value="anna">anna</option>
                                      <option value="francoise">francoise</option>
                                      <option value="genie">genie</option>
                                      <option value="luna">luna</option>
                                      <option value="marc" selected="selected">marc</option>
                                      </select>
                                      </span>  <!--class="spanPlayA av0"-->
                                      <br>
                                      <!--========================================================-->
                                      <span class="spanSpeed av0">
                                      Speed (log<sub>2</sub> scale):
                                      <input type="text" class="txtLogSpeed av0" value="+1.0">
                                      <input type="button" value="-" class="bttnSpeedDown av0">
                                      <input type="button" value="+" class="bttnSpeedUp av0">
                                      <input type="button" value="Reset" class="bttnSpeedReset av0" disabled="">
                                      </span>  <!--class="spanSpeed av0"-->
                                      <br>
                                      <hr style="height:1px;">
                                      <span align="center" class="divSiGML av0">
                                      SiGML URL:<br>
                                      <input type="text" class="txtSiGMLURL av0" value="scotland-H.sigml"><br>
                                      
                                      SiGML Text:<br>
                                      <textarea class="txtaSiGMLText av0" rows="4">&lt;?xml version="1.0" encoding="utf-8"?&gt;
                                      &lt;sigml&gt;
                                      
                                      &lt;hns_sign gloss="mug"&gt;
                                        &lt;hamnosys_nonmanual&gt;
                                          &lt;hnm_mouthpicture picture="mVg"/&gt;
                                        &lt;/hamnosys_nonmanual&gt;
                                        &lt;hamnosys_manual&gt;
                                          &lt;hamfist/&gt; &lt;hamthumbacrossmod/&gt;
                                              &lt;hamextfingerol/&gt; &lt;hampalml/&gt;
                                          &lt;hamshoulders/&gt;
                                          &lt;hamparbegin/&gt; &lt;hammoveu/&gt; &lt;hamarcu/&gt;
                                              &lt;hamreplace/&gt; &lt;hamextfingerul/&gt; &lt;hampalmdl/&gt;
                                          &lt;hamparend/&gt;
                                        &lt;/hamnosys_manual&gt;
                                      &lt;/hns_sign&gt;
                                      
                                      &lt;hns_sign gloss="take"&gt;
                                        &lt;hamnosys_nonmanual&gt;
                                          &lt;hnm_mouthpicture picture="te_Ik"/&gt;
                                        &lt;/hamnosys_nonmanual&gt;
                                        &lt;hamnosys_manual&gt;
                                          &lt;hamceeall/&gt; &lt;hamextfingerol/&gt; &lt;hampalml/&gt;
                                          &lt;hamlrbeside/&gt; &lt;hamshoulders/&gt; &lt;hamarmextended/&gt;
                                          &lt;hamreplace/&gt; &lt;hamextfingerl/&gt; &lt;hampalml/&gt;
                                          &lt;hamchest/&gt; &lt;hamclose/&gt;
                                        &lt;/hamnosys_manual&gt;
                                      &lt;/hns_sign&gt;
                                      
                                      &lt;hns_sign gloss="i"&gt;
                                        &lt;hamnosys_nonmanual&gt;
                                          &lt;hnm_mouthpicture picture="a_I"/&gt;
                                        &lt;/hamnosys_nonmanual&gt;
                                        &lt;hamnosys_manual&gt;
                                          &lt;hamfinger2/&gt; &lt;hamthumbacrossmod/&gt;
                                          &lt;hamextfingeril/&gt; &lt;hampalmr/&gt;
                                          &lt;hamchest/&gt; &lt;hamtouch/&gt;
                                        &lt;/hamnosys_manual&gt;
                                      &lt;/hns_sign&gt;
                                      
                                      &lt;/sigml&gt;
                                      </textarea>
                                      </span>  <!--class="divSiGML av0"-->
                                      <br>
                                      <!--========================================================-->
                                      <span class="spanSiGMLCtrlA av0">
                                      <!--input type="button" value="Play CAS" class="bttnPlayCAS av0" /-->
                                      <input type="button" value="Play SiGML URL" class="bttnPlaySiGMLURL av0">
                                      <input type="button" value="Play SiGML Text" class="bttnPlaySiGMLText av0">
                                      &nbsp;
                                      <input type="button" value="Stop" class="bttnStop av0" disabled="">
                                      </span>  <!--class="spanSiGMLCtrlA av0"-->
                                      <br>
                                      <span align="center" class="spanSiGMLCtrlB av0">
                                      <input type="button" value="Suspend" class="bttnSuspend av0" disabled="">
                                      <input type="button" value="Resume" class="bttnResume av0" disabled="">
                                      &nbsp;
                                      Frames:
                                      <input type="button" value="-1" class="bttnPrevF av0" disabled="">
                                      <input type="button" value="+1" class="bttnNextF av0" disabled="">
                                      </span>  <!--class="spanSiGMLCtrlB av0"-->
                                      <br>
                                      <!--========================================================-->
                                      <hr style="height:1px;">
                                      <!--========================================================-->
                                      <span class="spanInfo av0">
                                      Sign/Frame:
                                      <input type="text" class="txtSF av0" value="0/0">
                                      &nbsp;
                                      Gloss:
                                      <input type="text" class="txtGloss av0" value="[none]">
                                      &nbsp;
                                      FPS:
                                      <input type="text" class="txtFPS av0" value="00.00">
                                      </span>  <!--class="spanInfo av0"-->
                                      <br>
                                      <!--========================================================-->
                                      <span class="spanInfo av0">
                                      Status:
                                      <input type="text" class="statusExtra av0">
                                      </span>  <!--class="spanInfo av0"-->
                                      </div>
                                      </td>
                                      <td width="8"></td>
                                      <td width="374" height="403">
                                        <div class="divAv av0">
                                            <canvas class="canvasAv av0" ondragstart="return false" width="374" height="403"></canvas>
                                        </div>  <!--class="divAv av0"-->
                                      
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script>
        function saveTextHistory() {
            const text = document.querySelector('.text-box').value;
            fetch('/save-history', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text }),
            }).then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Text saved to history!');
                } else {
                    alert('Failed to save text: ' + data.error);
                }
            });
        }

        function toggleMenu() {
            document.querySelector('.navbar').classList.toggle('show');
        }

        window.onload = function() {
            CWASA.init();

            const savedText = localStorage.getItem('savedText');
            if (savedText) {
                document.querySelector('.text-box').value = savedText;
                localStorage.removeItem('savedText');
            }
        }
    </script>
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
    <script type="text/javascript" src="http://vhg.cmp.uea.ac.uk/tech/jas/vhg2021/cwa/allcsa.js"></script>
</body>
</html>
